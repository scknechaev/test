<!-- bound to the usersController -->
<div class="container-fluid container-fixed-lg ">
    <h3 class="page-title">User management</h3>
    <button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target=".bs-example-modal-lg" ng-click="setModalState()">Add user</button>
</div>
<div class="col-md-12">
  <div class="list-group users-list table-responsive">

    <table class="table table-hover">
      <thead>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Actions</th>
      </thead>
      <tbody>
        <tr ng-repeat="user in users track by $index" class="userItem">
          <td>
            <span>{{user.name}}</span>
          </td>
          <td class="userEmail">
            <span>{{user.email}}</span>
          </td>
          <td>
            <span ng-if="user.role === 1">Moderator</span>
            <span ng-if="user.role === 2">Admin</span>
          </td>
          <td  >
              <button  type="button" class="btn btn-primary btn-sm margin-right ng-scope delUserButton" title="Edit"  data-toggle="modal" data-target=".bs-example-modal-lg" ng-click="setModalState(user)">
              <span class="fa fa-pencil"></span>
            </button>
            <button class="btn btn-danger btn-sm ng-scope" title="Delete" ng-click="openConfirmDelUser(user, $index)">
              <span class="fa fa-trash-o"></span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- modal window -->
      <div class="modal fade in bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel" aria-hidden="false" ng-controller="createUserModalController">
        <div class="modal-dialog">
          <div class="modal-content">
            <form name="Form.UserManagement"  ng-submit="createOrEditUser()" novalidate>
            <div class="modal-header">
              <h1 style="text-align: center" ng-if="$parent.isEditing">Edit user</h1>
              <h1 style="text-align: center" ng-if="!$parent.isEditing">Add user</h1>
              <button type="button" class="close close-modal-bttn" title="Close" data-dismiss="modal">
                <span aria-hidden="true">Ã—</span>
              </button>
            </div>
              <div class="modal-body">
                <!-- Modal -->
                <div class="" >
                  <div style="margin-top: 10px; padding: 0px 15px;">
                      
                        <!-- <div class="form-group {{validate.name}}">
                          <label for="name" class="col-sm-2 control-label">Name</label>
                          <div class="col-sm-10">
                            <input ng-model="$parent.newUser.name" type="text" class="form-control validate-err" name="name"  placeholder="Name" required>
                            <div class="" ng-show="Form.UserManagement.name.$dirty && Form.UserManagement.name.$invalid" role="alert">
                                <small class="error" ng-show="Form.UserManagement.name.$error.required">This field is required</small>
                            </div>
                          </div>
                        </div> -->
                        <div class="form-group form-group-default required">
                          <label for="name">Name</label>
                          <input id="name" ng-model="$parent.newUser.name" type="text" class="form-control validate-err" name="name" required>
                          <div class="" ng-show="Form.UserManagement.name.$dirty && Form.UserManagement.name.$invalid" role="alert">
                              <small class="error" ng-show="Form.UserManagement.name.$error.required">This field is required</small>
                          </div>
                        </div>
                        <div class="form-group form-group-default required">
                          <label for="mail">Email</label>
                          <input id="mail" ng-model="$parent.newUser.email" email-validation type="text" class="form-control validate-err" name="mail" required>
                          <div class="" ng-show="Form.UserManagement.mail.$dirty && Form.UserManagement.mail.$invalid" role="alert">
                              <small class="error" ng-show="Form.UserManagement.mail.$error.required">This field is required</small>
                              <small class="error" ng-show="!Form.UserManagement.mail.$error.required && Form.UserManagement.mail.$error.emailValid">Enter valid e-mail</small>
                          </div>
                        </div>
                        <div class="form-group form-group-default" ng-class="{'required': !$parent.isEditing}">
                          <label for="password" ng-if="!$parent.isEditing">Password</label>
                          <label for="password" ng-if="$parent.isEditing">Set new password</label>
                          <input id="password" ng-if="$parent.isEditing" ng-model="$parent.newUser.password" type="password" ng-minlength="6" class="form-control validate-err" name="password">
                          <input id="password" ng-if="!$parent.isEditing" ng-model="$parent.newUser.password" type="password" ng-minlength="6" class="form-control validate-err" name="password" required>
                          <div class="" ng-show="Form.UserManagement.password.$dirty && Form.UserManagement.password.$invalid" role="alert">
                              <small class="error" ng-show="Form.UserManagement.password.$error.required">This field is required</small>
                              <small class="error" ng-show="!Form.UserManagement.password.$error.required && Form.UserManagement.password.$error.minlength ">Minimum password length 6 characters</small>
                          </div>
                        </div>
                        <div class="form-group form-group-default required">
                          <label for="role">Role</label>
                          <select id="role" ng-init="$parent.newUser.role = 1" name="role" ng-model="newUser.role" class="form-control validate-err" ng-options="r.type as r.name for r in roleTypes">
                          </select>
                        </div>
                        <!-- <div class="form-group {{validate.email}}">
                          <label for="mail" class="col-sm-2 control-label">Email</label>
                          <div class="col-sm-10">
                             <input ng-model="$parent.newUser.email" email-validation type="text" class="form-control validate-err" name="mail"  placeholder="Email" required>
                            <div class="" ng-show="Form.UserManagement.mail.$dirty && Form.UserManagement.mail.$invalid" role="alert">
                                <small class="error" ng-show="Form.UserManagement.mail.$error.required">This field is required</small>
                                <small class="error" ng-show="!Form.UserManagement.mail.$error.required && Form.UserManagement.mail.$error.emailValid">Enter valid e-mail</small>
                            </div>
                          </div>
                        </div> -->
                        <!-- <div class="form-group {{validate.password}}">
                          <label ng-if="!$parent.isEditing" for="password" class="col-sm-2 control-label">Password</label>
                          <label ng-if="$parent.isEditing" for="password" class="col-sm-2 control-label">Set New Password</label>
                          <div class="col-sm-10">
                            <input ng-if="$parent.isEditing" ng-model="$parent.newUser.password" type="password" ng-minlength="6" class="form-control validate-err" name="password" placeholder="Password">
                            <input ng-if="!$parent.isEditing" ng-model="$parent.newUser.password" type="password" ng-minlength="6" class="form-control validate-err" name="password" placeholder="Password" required>
                            <div class="" ng-show="Form.UserManagement.password.$dirty && Form.UserManagement.password.$invalid" role="alert">
                                <small class="error" ng-show="Form.UserManagement.password.$error.required">This field is required</small>
                                <small class="error" ng-show="!Form.UserManagement.password.$error.required && Form.UserManagement.password.$error.minlength ">Minimum password length 6 characters</small>
                            </div>
                          </div>
                        </div> -->
                        <!-- <div class="form-group">
                          <label for="role" class="col-sm-2 control-label">Role</label>
                          <div class="col-sm-10">
                            <select ng-init="$parent.newUser.role = 1" ng-model="newUser.role" class="form-control validate-err" ng-options="r.type as r.name for r in roleTypes">
                            </select>
                          </div>
                        </div> -->
                          <div ng-show="alert">
                              <alert ng-model="alert"  type="{{alert.type}}" close="closeAlert()">{{alert.msg}}</alert>
                          </div>
                      
                    </div>
                  </div>
              </div>
              <div class="modal-footer">
                <div class="form-group ng-class={{validate.email}}">
                  <div class="col-sm-offset-9 col-sm-2">
                    <button type="submit" ng-disabled="Form.UserManagement.$invalid" class="btn btn-default col-sm-offset-1" ng-if="$parent.isEditing">Save</button>
                    <button type="submit" ng-disabled="Form.UserManagement.$invalid" class="btn btn-default col-sm-offset-4" ng-if="!$parent.isEditing">Create</button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
  <!-- Ending modal -->
</div>

